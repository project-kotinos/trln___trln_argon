Blacklight.onLoad(function() {
  $(window).load(function(){

    //remove default mast search to fix duplicate IDs
    $(".blacklight-advanced #search-navbar .navbar-form").remove();
    $(".blacklight-advanced_trln #search-navbar .navbar-form").remove();
    
    // change adv search scope
  	window.location.href.indexOf('advanced_trln') != -1 ? $('#option_trln').attr('checked',true) : $('#option_catalog').attr('checked',true);
  	
  	$("input[type='radio'][name='option']").change(function() {
        var action = $(this).val();
        $(".advanced").attr("action", "/" + action);
     });

    // fix labeling for fields generated by Chosen jquery library (https://harvesthq.github.io/chosen/)
    $("[id$='_chosen']").each(function() {
      $the_id = $(this).attr('id');
      $aria_label = $(this).attr('id').replace('_chosen', '_label');
      $('#' + $the_id + ' .chosen-search-input').attr('aria-labelledby', $aria_label);
    });

  });
});